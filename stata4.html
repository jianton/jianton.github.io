<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="José-Ignacio Antón" />
  <title>Sesión 4. Análisis gráfico</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
<style>
/* CSS for Markstat 2.0 using Pandoc 2.0 */
body{padding:14px 28px;}
body, table {font-family: Helvetica, Arial, Sans-serif; font-size: 14px; width: 95%; max-width: unset;}
h1, h2, h3, h4 {font-weight: normal; color: #3366cc}
h1 {font-size: 200%;}
h2 {font-size: 150%;}
h3 {font-size: 120%;}
h4 {font-size: 100%; font-weight:bold}
img.center {display:block; margin-left:auto; margin-right:auto}
.small{font-size:8pt;}
a {color: black;}
a:visited {color: #808080;}
a.plain {text-decoration:none;}
a.plain:hover {text-decoration:underline;}
.em {font-weight:bold;}
pre, code {font-family: "lucida console", monospace;}
pre.stata {font-size:13px; line-height:13px;}
pre {padding:8px; border:1px solid #c0c0c0; border-radius:8px; background-color:#fdfdfd;}
code {color:#3366cc; background-color:#fafafa;}
pre code { color:black; background-color:white}
/* Added for Pandoc */
figure > img, div.figure > img {display:block; margin:auto}
figcaption, p.caption {text-align:center; font-weight:bold; color:#3366cc;}
h1.title {text-align:center; margin-bottom:0}
p.author, h2.author {font-style:italic; text-align:center;margin-top:12px;margin-bottom:-25px}
p.date, h3.date {text-align:center;margin-top:4px; margin-bottom:0}
/* Tables*/
table { margin:auto; border-collapse:collapse; }
table caption { margin-bottom:1ex;}
th, td { padding:4px 6px;}
thead tr:first-child th {border-top:1px solid black; padding-top:6px}
thead tr:last-child  th {padding-bottom:6px}
tbody tr:first-child td {border-top:1px solid black; padding-top:6px}
tbody tr:last-child  td {padding-bottom:6px;}
table tbody:last-child tr:last-child td {border-bottom:1px solid black;}
</style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Sesión 4. Análisis gráfico</h1>
<p class="author">José-Ignacio Antón</p>
</header>
<hr />
<p style="text-align: center;">
<a href="https://jianton.github.io/curso_stata.html"><span
style="color:red"><font size="4">Inicio</font></span></a>      <a
href="https://jianton.github.io/stata1.html"><span
style="color:red"><font size="4">Sesión 1</font></span></a>      <a
href="https://jianton.github.io/stata2.html"><span
style="color:red"><font size="4">Sesión 2</font></span></a>      <a
href="https://jianton.github.io/stata3.html"><span
style="color:red"><font size="4">Sesión 3</font></span></a>      <a
href="https://jianton.github.io/stata4.html"><span
style="color:red"><font size="4">Sesión 4</font></span></a>      <a
href="https://jianton.github.io/stata5.html"><span
style="color:red"><font size="4">Sesión 5</font></span></a>      <a
href="https://jianton.github.io/stata_ejercicios.html"><span
style="color:red"><font size="4">Ejercicios</font></span></a>
</p>
<hr />
<h1 id="consejos-preliminares">1. Consejos preliminares</h1>
<h2 id="línea-de-comandos-o-menús-no-tenemos-por-qué-elegir">¿Línea de
comandos o menús? No tenemos por qué elegir</h2>
<p><code>Stata</code> presenta buenas capacidades gráficas y estas han
ido mejorando a lo largo del tiempo de forma muy sustancial. En <span
class="citation" data-cites="Escobar2012">Escobar et al. (2012)</span>
se realiza una aproximación al tema y tres referencias muy recomendables
son <span class="citation" data-cites="Cox2014">Cox (2014)</span> y
<span class="citation" data-cites="Mitchell2012">Mitchell (2012)</span>,
sobre la realización de gráficos con este paquete estadístico, y <span
class="citation" data-cites="Schwabish2014">Schwabish (2014)</span>, que
proporciona unos consejos generales sobre cómo realizar buenos
gráficos.</p>
<p>En primer lugar, resulta muy sencillo realizar gráficos con
<code>Stata</code>. Al mismo tiempo, elaborar figuras totalmente
satisfactorias suele requerir bastante tiempo <span
class="math inline">\(\rightarrow\)</span> <strong>resulta esencial que
nuestros gráficos sean reproducibles</strong>.</p>
<p>Así, por ejemplo, no es complicado realizar gráficos muy sofisticados
con la interfaz de <code>Stata</code>. Su sistema de ventanas es muy
intuitivo y nos permite controlar múltiples opciones.</p>
<figure>
<img src="histogram.png" style="width:30.0%"
alt="Ejemplo de uso del sistema de ventanas para elaborar un histograma" />
<figcaption aria-hidden="true">Ejemplo de uso del sistema de ventanas
para elaborar un histograma</figcaption>
</figure>
<p>El problema radica en la <strong>reproducibilidad</strong>: si
reiniciamos el análisis gráfico o salimos del programa, tendremos que
acordarnos de todas las opciones seleccionadas y, además, tendremos que
repetir los cambios realizados en el editor de gráficos sobre la propia
figura. <span class="math inline">\(\rightarrow\)</span> <strong>Opción
práctica:</strong> realizamos el gráfico con los menús de ventanas,
empleando <code>submit</code> para ver cada cambio realizado y, cuando
estemos satisfechos, copiamos el código y podemos reutilizarlo con
adaptaciones.</p>
<h2 id="personalizando-gráficos">Personalizando gráficos</h2>
<p>Un avance sustancial viene dado por el paquete <code>grstyle</code>,
que debe utilizarse conjuntamente <code>palettes</code> y
<code>colrspace</code> <span class="citation"
data-cites="Jann2018a Jann2018b">(Jann, 2018a, 2018b)</span>. También es
muy potente el paquete <code>brewscheme</code>. La idea de estos
paquetes es que podemos definir previamente el formato de los gráficos
(colores, ancho de las líneas, etc.) y, posteriormente, emplear comandos
sencillos para la realización de los gráficos donde no tengamos que
especificar muchas opciones. Podemos instalar estos paquetes con las
siguientes instrucciones:</p>
<pre><code>ssc install grstyle, replace

ssc install palettes, replace

ssc install colrspace, replace

ssc install brewscheme, replace</code></pre>
<p>Estos paquetes nos facilitan bastante el trabajo, pero es muy posible
que queramos, en cada gráfico, añadir opciones específicas de
personalización más allá de los parámetros generales.</p>
<h2 id="formatos-de-exportación">Formatos de exportación</h2>
<p><code>Stata</code> cuenta con un formato nativo <code>.gph</code> con
bastante calidad y que puede ser una buena opción para guardar las
figuras elaboradas con la posibilidad de modificarlas luego. Además,
naturalmente, podemos copiar las figuras producidas en la ventana de
gráficos y pegarlas en un documento de un procesador de textos (e.g.,
Microsoft Word) o un programa de edición de imágenes (e.g., Microsoft
Paint). Sin embargo, existe un gran número de formatos en los que
<code>Stata</code> puede guardar los graficos: <code>.ps</code>,
<code>.eps</code>, <code>.svg</code>, <code>.wmf</code>,
<code>.emf</code>, <code>.pdf</code>, <code>.png</code>,
<code>.tif</code>, <code>.gif</code> y <code>.jpg</code>. Formatos como
<code>.wmf</code> y <code>.emf</code> son muy apropiados para
aplicaciones de Microsoft Office (e.g., Microsoft Word). Sin embargo,
los formatos de vectores asegura muchísima calidad y son los empleados
en edición profesional (<code>.ps</code>, <code>.eps</code>,
<code>.svg</code>, <code>.pdf</code>, <code>.png</code>). La instrucción
para exportar gráficos es la siguiente:</p>
<pre>
graph export <i>newfilename.suffix</i> [, <i>options</i>]
</pre>
<h1
id="gráficos-más-frecuentes-y-potencialidades-de-los-gráficos-de-stata">2.
Gráficos más frecuentes y potencialidades de los gráficos de
<code>Stata</code></h1>
<p>En primer lugar, vamos a configurar el formato de los gráficos para
que nos sirva para todas las figuras que elaboraremos con el comando
<code>grstyle</code>. Sin embargo, como se mencionaba anteriormente, de
forma habitual, necesitaremos implementar opciones adicionales. En esta
sección, vamos a tratar de elaborar gráficos de alta calidad aptos para
publicaciones científicas siguiendo los formatos sugeridos por <span
class="citation" data-cites="Schwabish2014">Schwabish (2014)</span> para
Ciencias Sociales. Dado que el número de gráficos que <code>Stata</code>
puede realizar no puede ser abarcado (siquiera lejanamente) en un curso
de estas características, aquí nos limitamos a presentar una serie de
figuras que ilustran su potencial. En particular, elaboramos en
<code>Stata</code> todas las figuras que presenta Schwabish (2014). El
proceso de realización de los mismos se fundamenta en procesos de
ensayo-error y en emplear las herramientas de ayuda destacadas con
anterioridad. Hemos creado las figuras a través del sistema de ventanas
y hemos exportado la sintaxis obtenida con la instrucción
<code>submit</code>. El proceso de realización de los mismos se
fundamenta en procesos de ensayo-error y en emplear las herramientas de
ayuda destacadas con anterioridad.</p>
<h2 id="gráfico-de-dispersión">Gráfico de dispersión</h2>
<p>Comenzamos por un gráfico sencillo, en el que tratamos de ver la
relación el salario medio de una Comunidad Autónoma y la proporción de
personas pobres (tasa de pobreza). Realizaremos en primer lugar el
gráfico sin personalización alguna y, posteriormente, elaboraremos una
figura con opciones personalizadas. El proceso es eminentemente
<strong><em>learning by doing</em></strong> y la forma habitual de
trabajo es elaborar el gráfico con los menús y obtener el código que
responde a nuestras preferencias, que llevaremos al archivo
<code>.do</code> para poder reproducir el gráfico cuando lo deseemos o
reutilizarlo con otras bases de datos.</p>

<pre class='stata'>. //  Fijamos el directorio de trabajo
. 
. cd "D:\Dropbox\curso_stata\sesión4"
D:\Dropbox\curso_stata\sesión4

. 
. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos el salario medio y la tasa de pobreza por CCAA
. 
. generate rentaasa = rentamonasag + rentanomonasag
(5,362 missing values generated)

. generate nmesesasa = nmesesasatc + 0.5*nmesesasatp
(5,578 missing values generated)

. keep if rentaasa > 0 &amp; rentaasa &lt; .
(19,369 observations deleted)

. keep if nmesesasa > 0 &amp; nmesesasa &lt; .
(2,585 observations deleted)

. 
. generate salario = rentaasa/nmesesasa

. label variable salario "Salario bruto (euros/mes)"

. 
. //  Creamos la base de datos con los estadísticos de interés
. 
. collapse (mean) salario hpobreza (count) nper = pid [pweight=peso], by(region)

. 
. //  Expresamos la variable pobreza en tanto por 100
. 
. replace hpobreza = 100*hpobreza
(19 real changes made)

. 
. //  El patrón por defecto de Stata
. 
. twoway (scatter hpobreza salario), ///
> xtitle("Salario bruto (euros/mes)") ytitle("Porcentaje de personas pobres") ///
> title("Salario y pobreza por CCAA (2018)")
</pre>

<figure>
<img src="example.png" style="width:40.0%" alt="Gráfico por defecto" />
<figcaption aria-hidden="true">Gráfico por defecto</figcaption>
</figure>
<p>Ahora vamos a realizar el mismo gráfico de una manera mucho más
personalizada.</p>
<pre class='stata'>. //  Podemos cambiar el tipo de letra
. 
. graph set window fontface       "Times New Roman"

. graph set window fontfacemono   "Times New Roman"

. graph set window fontfacesans   "Times New Roman"

. graph set window fontfaceserif  "Times New Roman"

. graph set window fontfacesymbol "Symbol"

. 
. //  Comenzamos fijando un tipo de gráfico como base o eliminar todo esa base
. 
. grstyle clear

. grstyle init

. grstyle set plain

. 
. //  Fijamos un fondo blanco
. 
. grstyle color background white

. 
. //  Definimos las dimensiones del gráfico
. 
. grstyle graphsize x 4

. grstyle graphsize y 4

. 
. //  Podemos eliminar las líneas auxiliares
. 
. grstyle set nogrid

. 
. //  Seleccionamos una paleta de colores (e.g., paleta hue)
. 
. grstyle set color hue, n(4)

. 
. //  Eliminamos la línea que rodea a la leyenda
. 
. grstyle linestyle legend none

. 
. //  Ponemos la leyenda arriba
. 
. grstyle set legend 6

. 
. //  Formato de los marcadores
. 
. grstyle symbol p circle_hollow

. 
. //  Color de los marcadores
. 
. grstyle color p1markline gs10

. 
. grstyle color p1markfill gs10

. 
. //  Color de las series
. 
. grstyle set color red green orange blue

. 
. //  Gráfico de ejemplo
. 
. twoway (scatter hpobreza salario [pweight = nper] if region != 9) ///
> (scatter hpobreza salario [pweight = nper] if region == 9, mcolor(red)) ///
> (scatter hpobreza salario [pweight = nper] if region == 9, mlabel(region) mlabsize(vsmall) mlabcolor(red) mlabposition(12) mlabgap(medsmall) mcolor(none)) ///
> (lfit hpobreza salario [pweight = nper]), ///
> title("Salario y pobreza por CCAA (2018)", size(medsmall) margin(small)) ///
> xtitle("Salario bruto (euros/mes)", margin(small) size(small)) xlabel(, format(%9,0gc) labsize(small)) ///
> ytitle("Porcentaje de personas pobres (%)", margin(small) size(small)) ylabel(, format(%2,0fc) labsize(small)) ///
> legend(off)
</pre>

<figure>
<img src="scatter.png" style="width:40.0%"
alt="Gráfico de dispersión (personalizado)" />
<figcaption aria-hidden="true">Gráfico de dispersión
(personalizado)</figcaption>
</figure>
<h2 id="gráfico-de-líneas">Gráfico de líneas</h2>
<p>En este ejemplo, vamos a representar el salario por grupos de edad y
nivel de estudios.</p>
<pre class='stata'>. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos la edad y los grupos de edad
. 
. generate edad = 2018 - anonac

. generate edadg = 1 if edad > 16 &amp; edad &lt;= 29
(29,586 missing values generated)

. replace edadg = 2 if edad >= 30 &amp; edad &lt;= 44
(6,145 real changes made)

. replace edadg = 3 if edad >= 45 &amp; edad &lt;= 54
(5,361 real changes made)

. replace edadg = 4 if edad >= 55 &amp; edad &lt;= 64
(5,159 real changes made)

. label variable edadg "Grupos de edad"

. label define edadg_lab 1 "16-29" 2 "30-44" 3 "45-54" 4 "55-64"

. label values edadg edadg_lab

. 
. //  Calculamos grupos de niveles educativos
. 
. generate educg = 1 if educ == 0 | educ == 100
(27,003 missing values generated)

. replace educg = 2 if educ == 200 | educ == 344 | educ == 353
(8,725 real changes made)

. replace educg = 3 if educ == 300 | educ == 354 | educ == 400 | educ == 450
(4,735 real changes made)

. replace educg = 4 if educ == 500
(7,969 real changes made)

. 
. label variable educg "Educación (agrupada)"

. label define educg_lab 1 "Elemental" 2 "Básica" 3 "Media" 4 "Superior"

. label values educg educg_lab

. 
. //  Calculamos el salario
. 
. generate rentaasa = rentamonasag + rentanomonasag
(5,362 missing values generated)

. generate nmesesasa = nmesesasatc + 0.5*nmesesasatp
(5,578 missing values generated)

. keep if rentaasa > 0 &amp; rentaasa &lt; .
(19,369 observations deleted)

. keep if nmesesasa > 0 &amp; nmesesasa &lt; .
(2,585 observations deleted)

. 
. generate salario = rentaasa/nmesesasa

. label variable salario "Salario bruto (euros/mes)"

. 
. //  Eliminamos valores perdidos
. 
. drop if educg == . | edadg == . | salario == .
(177 observations deleted)

. 
. //  Creamos la base de datos con los estadísticos de interés
. 
. collapse (mean) salario [pweight=peso], by(edadg educg)

. 
. //  Realizamos algunas manipulaciones para representar los datos
. 
. expand 5
(64 observations created)

. 
. bysort edadg educg: generate copy = _n

. label variable copy "Copy for graph"

. label define copy_lab 1 "Elemental" 2 "Básica" 3 "Media" 4 "Superior"

. label values copy copy_lab

. 
. forvalues i = 1(1)4 {
  2.   drop if educg == `i' &amp; copy == `i'
  3. 
. }
(4 observations deleted)
(4 observations deleted)
(4 observations deleted)
(4 observations deleted)

. 
. bysort edadg educg: egen meducg =mean(educg)

. 
. replace educg = 5 if copy == 5
(16 real changes made)

. 
. replace copy = meducg if copy == 5
(16 real changes made)

. 
. //  Realizamos el gráfico de interés
. 
. twoway ///
> (line salario edadg if educg == 1, lcolor(gs10)) ///
> (line salario edadg if educg == 2, lcolor(gs10)) ///
> (line salario edadg if educg == 3, lcolor(gs10)) ///
> (line salario edadg if educg == 4, lcolor(gs10)) ///
> (line salario edadg if educg == 5, lcolor(blue)), ///
> ytitle("Salario mensual", size(small) margin(small)) ylabel(, labsize(small) format(%5,0fc)) ///
> xtitle("Edad", size(small) margin(small)) xlabel(1 "16-29" 2 "30-44" 3 "45-54" 4 "55-64", labsize(small)) ///
> by(copy, note("") legend(off) imargin(medsmall) title("Salario por edad y nivel educativo (2018)", size(medsmall) margin(small))) ///
> subtitle(, size(small)) ///
> xsize(4) ysize(4)
</pre>

<figure>
<img src="lineplot.png" style="width:40.0%" alt="Gráfico de líneas" />
<figcaption aria-hidden="true">Gráfico de líneas</figcaption>
</figure>
<h2 id="gráfico-de-puntos">Gráfico de puntos</h2>
<p>En este subapartado, elaboramos una figura que muestra la tasa de
empleo por sexo y nivel educativo en España.</p>
<pre class='stata'>. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos la edad
. 
. generate edad = 2018 - anonac

. 
. //  Calculamos la tasa de empleo
. 
. gen empleo = 0 if edad >= 18 &amp; edad &lt;= 64
(13,265 missing values generated)

. recode empleo (0 = 1) if sitact == 1
(12,867 changes made to empleo)

. 
. //  Calculamos los grupos de niveles educativos
. 
. generate educg = 1 if educ == 0 | educ == 100
(27,003 missing values generated)

. replace educg = 2 if educ == 200 | educ == 344 | educ == 353
(8,725 real changes made)

. replace educg = 3 if educ == 300 | educ == 354 | educ == 400 | educ == 450
(4,735 real changes made)

. replace educg = 4 if educ == 500
(7,969 real changes made)

. 
. label variable educg "Educación (agrupada)"

. label define educg_lab 1 "Educación elemental" 2 "Educación básica" 3 "Educación media" 4 "Educación superior"

. label values educg educg_lab

. 
. keep if empleo &lt; . &amp; educg &lt; .
(13,442 observations deleted)

. 
. //  Creamos la base de datos con los estadísticos de interés
. 
. collapse (mean) empleo [pweight=peso], by(sexo educg)

. 
. //  Expresamos la tasa de empleo en tanto por 100
. 
. replace empleo = 100*empleo
(8 real changes made)

. 
. //  Elaboramos el gráfico de interés
. 
. twoway ///
> (line educg empleo if educg == 1, lcolor(black)) ///
> (line educg empleo if educg == 2, lcolor(black)) ///
> (line educg empleo if educg == 3, lcolor(black)) ///
> (line educg empleo if educg == 4, lcolor(black)) ///
> (scatter educg empleo if sexo == 1, mcolor(navy) msize(4-pt) msymbol(circle) mlabcolor()) ///
> (scatter educg empleo if sexo == 2, mcolor(orange) msize(4-pt) msymbol(circle) mlabel(educg) mlabsize(small) mlabcolor(black) mlabposition(9) mlabgap(small)), ///
> title("Tasa de empleo por sexo y nivel educativo en España (2018)", size(medsmall) margin(small)) ///
> yscale(off) ylabel(0(1)4) ///
> xtitle("Porcentaje de personas empleadas (%)", margin(small) size(small)) xlabel(0(20)100, labsize(vsmall)) ///
> legend(on order(5 "Hombres" 6 "Mujeres") size(vsmall) color(black) nobox position(11))
</pre>

<figure>
<img src="dotplot.png" style="width:40.0%" alt="Gráfico de puntos" />
<figcaption aria-hidden="true">Gráfico de puntos</figcaption>
</figure>
<h2 id="gráfico-de-barras">Gráfico de barras</h2>
<p>A continuación, mostramos la tasa de pobreza por nivel educativo y
sexo en España en el año 2018. Además, en este ejemplo, vamos a usar el
editor de gráficos de <code>Stata</code>.</p>
<pre class='stata'>. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos los grupos de niveles educativos
. 
. generate educg = 1 if educ == 0 | educ == 100
(27,003 missing values generated)

. replace educg = 2 if educ == 200 | educ == 344 | educ == 353
(8,725 real changes made)

. replace educg = 3 if educ == 300 | educ == 354 | educ == 400 | educ == 450
(4,735 real changes made)

. replace educg = 4 if educ == 500
(7,969 real changes made)

. 
. label variable educg "Educación (agrupada)"

. label define educg_lab 1 "Educación elemental" 2 "Educación básica" 3 "Educación media" 4 "Educación superior"

. label values educg educg_lab

. 
. keep if educg &lt; .
(5,574 observations deleted)

. 
. //  Creamos la base de datos con los estadísticos de interés
. 
. collapse (mean) hpobreza [pweight=peso], by(sexo educg)

. 
. //  Expresamos la tasa de pobreza en tanto por 100
. 
. replace hpobreza = 100*hpobreza
(8 real changes made)

. 
. //  Reordenamos los datos para representarlos
. 
. reshape wide hpobreza, i(educg) j(sexo)
(j = 1 2)

Data                               Long   ->   Wide
─────────────────────────────────────────────────────────────────────────────
Number of observations                8   ->   4           
Number of variables                   3   ->   3           
j variable (2 values)              sexo   ->   (dropped)
xij variables:
                               hpobreza   ->   hpobreza1 hpobreza2
─────────────────────────────────────────────────────────────────────────────

. 
. //  Elaboramos el gráfico de interés
. 
. graph bar (asis) hpobreza1 hpobreza2, ///
> over(educg, relabel(1 "Elementales" 2 "Básicos" 3 "Medios" 4 "Superiores") label(labsize(vsmall))) ///
> bar(1, fcolor(navy) lcolor(none)) ///
> bar(2, fcolor(orange) lcolor(none)) ///
> ytitle(Tasa de pobreza (%)) ytitle(, size(vsmall) margin(sides)) ylabel(0(10)50, labsize(vsmall) nogrid) ///
> title(Pobreza por sexo y nivel educativo en España (2018), size(medsmall) margin(top_bottom)) legend(off) ///
> b1title("Nivel de estudios", size(vsmall) margin(top_bottom))

. 
. gr_edit plotregion1.AddTextBox added_text editor 35.8934560474294 10.62503501939819

. gr_edit plotregion1.added_text_new = 1

. gr_edit plotregion1.added_text_rec = 1

. gr_edit plotregion1.added_text[1].style.editstyle  angle(default) size( sztype(points) val(2) allow_pct(1)) ///
> color(navy) horizontal(left) vertical(middle) margin( gleft( sztype(relative) val(0) allow_pct(1)) ///
> gright( sztype(relative) val(0) allow_pct(1)) gtop( sztype(relative) val(0) allow_pct(1)) ///
> gbottom( sztype(relative) val(0) allow_pct(1))) linegap( sztype(relative) val(0) allow_pct(1)) ///
> drawbox(no) boxmargin( gleft( sztype(relative) val(0) allow_pct(1)) ///
> gright( sztype(relative) val(0) allow_pct(1)) gtop( sztype(relative) val(0) allow_pct(1)) ///
> gbottom( sztype(relative) val(0) allow_pct(1))) fillcolor(bluishgray) ///
> linestyle( width( sztype(relative) val(.2) allow_pct(1)) color(black) pattern(solid) align(inside)) box_alignment(east) editcopy

. gr_edit plotregion1.added_text[1].style.editstyle size(vsmall) editcopy

. gr_edit plotregion1.added_text[1].text = {}

. gr_edit plotregion1.added_text[1].text.Arrpush Hombres

. 
. gr_edit plotregion1.AddTextBox added_text editor 32.6954873184468 19.95200785068754

. gr_edit plotregion1.added_text_new = 2

. gr_edit plotregion1.added_text_rec = 2

. gr_edit plotregion1.added_text[2].style.editstyle  angle(default) size( sztype(relative) val(4.1667) allow_pct(1)) ///
> color(navy) horizontal(left) vertical(middle) margin( gleft( sztype(relative) val(0) allow_pct(1)) ///
> gright( sztype(relative) val(0) allow_pct(1)) gtop( sztype(relative) val(0) allow_pct(1)) ///
> gbottom( sztype(relative) val(0) allow_pct(1))) ///
> linegap( sztype(relative) val(0) allow_pct(1)) drawbox(no) boxmargin( gleft( sztype(relative) val(0) allow_pct(1)) ///
> gright( sztype(relative) val(0) allow_pct(1)) gtop( sztype(relative) val(0) allow_pct(1)) ///
> gbottom( sztype(relative) val(0) allow_pct(1))) fillcolor(bluishgray) ///
> linestyle( width( sztype(relative) val(.2) allow_pct(1)) color(black) pattern(solid) align(inside)) box_alignment(east) editcopy

. gr_edit plotregion1.added_text[2].style.editstyle size(vsmall) editcopy

. gr_edit plotregion1.added_text[2].text = {}

. gr_edit plotregion1.added_text[2].text.Arrpush Mujeres

. gr_edit plotregion1.added_text[2].style.editstyle color(orange) editcopy

. 
. gr_edit plotregion1.AddLine added_lines editor 6.412853740751393 30.4815089676127 6.412853740751393 35.64745845289226

. gr_edit plotregion1.added_lines_new = 1

. gr_edit plotregion1.added_lines_rec = 1

. gr_edit plotregion1.added_lines[1].style.editstyle  linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(navy) pattern(solid) align(inside)) headstyle( symbol(circle) linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(navy) pattern(solid) align(inside)) fillcolor(navy) size( sztype(relative) val(1.04166) allow_pct(1)) ///
> angle(stdarrow) symangle(zero) backsymbol(none) backline( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(navy) pattern(solid) align(inside)) backcolor(navy) backsize( sztype(relative) val(0) allow_pct(1)) ///
> backangle(stdarrow) backsymangle(zero)) headpos(neither) editcopy

. 
. gr_edit plotregion1.AddLine added_lines editor 6.412853740751393 35.56545925471323 9.872859791068407 35.56545925471323

. gr_edit plotregion1.added_lines_new = 2

. gr_edit plotregion1.added_lines_rec = 2

. gr_edit plotregion1.added_lines[2].style.editstyle  linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(navy) pattern(solid) align(inside)) headstyle( symbol(circle) linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(navy) pattern(solid) align(inside)) fillcolor(navy) size( sztype(relative) val(1.04166) allow_pct(1)) ///
> angle(stdarrow) symangle(zero) backsymbol(none) backline( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(black) pattern(solid) align(inside)) backcolor(black) backsize( sztype(relative) val(0) allow_pct(1)) ///
> backangle(stdarrow) backsymangle(zero)) headpos(head) editcopy

. 
. gr_edit plotregion1.AddLine added_lines editor 15.89026161770668 27.44753863498822 15.89026161770668 32.2854913275516

. gr_edit plotregion1.added_lines_new = 3

. gr_edit plotregion1.added_lines_rec = 3

. gr_edit plotregion1.added_lines[3].style.editstyle  linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(orange) pattern(solid) align(inside)) headstyle( symbol(circle) linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(orange) pattern(solid) align(inside)) fillcolor(orange) size( sztype(relative) val(1.04166) allow_pct(1)) ///
> angle(stdarrow) symangle(zero) backsymbol(none) backline( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(black) pattern(solid) align(inside)) backcolor(navy) backsize( sztype(relative) val(0) allow_pct(1)) ///
> backangle(stdarrow) backsymangle(zero)) headpos(neither) editcopy

. 
. gr_edit plotregion1.AddLine added_lines editor 15.89026161770668 32.28549132755161 18.74852748535989 32.28549132755161

. gr_edit plotregion1.added_lines_new = 4

. gr_edit plotregion1.added_lines_rec = 4

. gr_edit plotregion1.added_lines[4].style.editstyle  linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(orange) pattern(solid) align(inside)) headstyle( symbol(circle) linestyle( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(orange) pattern(solid) align(inside)) fillcolor(orange) size( sztype(relative) val(1.04166) allow_pct(1)) ///
> angle(stdarrow) symangle(zero) backsymbol(none) backline( width( sztype(relative) val(.2) allow_pct(1)) ///
> color(black) pattern(solid) align(inside)) backcolor(black) backsize( sztype(relative) val(0) allow_pct(1)) ///
> backangle(stdarrow) backsymangle(zero)) headpos(head) editcopy
</pre>

<figure>
<img src="barplot.png" style="width:40.0%" alt="Gráfico de barras" />
<figcaption aria-hidden="true">Gráfico de barras</figcaption>
</figure>
<p>La última parte del código corresponde al editor de gráficos de
<code>Stata</code>, que permite hacer cambios manualmente. Si queremos
asegurar que el gráfico es reproducible podemos seguir estos pasos:</p>
<p><strong>Paso 1</strong>. Abrimos el gráfico en el editor.</p>
<p><strong>Paso 2</strong>. Pulsamos <code>Start recording</code>.</p>
<p><strong>Paso 3</strong>. Realizamos los cambios que queramos (añadir
cuadros de texto, flechas, etc.).</p>
<p><strong>Paso 4</strong>. Finalizamos la grabación pulsando
<code>End recording</code>.</p>
<p><strong>Paso 5</strong>. Abrimos el archivo <code>.grec</code> creado
en el blog de notas (o el propio editor de archivos <code>.do</code> de
<code>Stata</code>).</p>
<p><strong>Paso 6</strong>. Copiamos el código y relevante al arhivo
<code>.do</code> tras el grafico, eliminamos el <code>.</code> e
incluimos antes de cada instrucción <code>gr_edit</code> seguido de un
espacio.</p>
<figure>
<img src="grapheditor.png" style="width:40.0%"
alt="Modificación de gráficos con el editor de Stata" />
<figcaption aria-hidden="true">Modificación de gráficos con el editor de
<code>Stata</code></figcaption>
</figure>
<h2 id="funciones-de-densidad">Funciones de densidad</h2>
<p>Se trata de uno de los fuertes de <code>Stata</code>, que es
complicado de abordar con otro tipo de programas (e.g., Microsoft
Excel). En este caso, vamos a representar las funciones de densidad del
salario mensual de las personas con educación elemental y educación
superior.</p>
<pre class='stata'>. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos el salario
. 
. generate rentaasa = rentamonasag + rentamonasag
(5,362 missing values generated)

. generate nmesesasa = nmesesasatc + 0.5*nmesesasatp
(5,578 missing values generated)

. keep if rentaasa > 0 &amp; rentaasa &lt; .
(19,416 observations deleted)

. keep if nmesesasa > 0 &amp; nmesesasa &lt; .
(2,540 observations deleted)

. 
. generate salario = rentaasa/nmesesasa

. label variable salario "Salario bruto (euros/mes)"

. 
. //  Lo expresamos en logaritmos
. 
. generate logsalario = ln(salario)

. label variable logsalario "Salario en logaritmos"

. 
. //  Calculamos los grupos de niveles educativos
. 
. generate educg = 1 if educ == 0 | educ == 100
(10,934 missing values generated)

. replace educg = 2 if educ == 200 | educ == 344 | educ == 353
(3,331 real changes made)

. replace educg = 3 if educ == 300 | educ == 354 | educ == 400 | educ == 450
(2,509 real changes made)

. replace educg = 4 if educ == 500
(5,094 real changes made)

. 
. label variable educg "Educación (agrupada)"

. label define educg_lab 1 "Educación elemental" 2 "Educación básica" 3 "Educación media" 4 "Educación superior"

. label values educg educg_lab

. 
. keep if educg &lt; .
(0 observations deleted)

. 
. //  Eliminamos valores perdidos
. 
. keep if logsalario &lt; . | educg &lt; .
(0 observations deleted)

. 
. //  Elaboramos el gráfico de interés
. 
. twoway ///
> (kdensity logsalario if educg == 1 [aweight = peso]) ///
> (kdensity logsalario [aweight = educg == 4]), ///
> ytitle("Densidad", size(vsmall) margin(sides)) ylabel(, labsize(vsmall) format(%02,1fc)) ///
> xtitle("Salario bruto en logaritmos (euros/mes)", size(vsmall) margin(top_bottom)) xlabel(, labsize(vsmall)) ///
> title("Función de densidad del salario" "por nivel educativo en España (2018)", size(small) margin(top_bottom)) ///
> legend(on order(1 "Educación elemental" 2 "Educación superior") cols(1) size(vsmall) position(10) ring(0))
</pre>

<figure>
<img src="kdensity.png" style="width:40.0%" alt="Gráfico de densidad" />
<figcaption aria-hidden="true">Gráfico de densidad</figcaption>
</figure>
<h1 id="elaboración-de-mapas">3. Elaboración de mapas</h1>
<p>No es, desde luego, el mejor software para esta tarea, pero, sin
embargo, existen algunos comandos que pueden ser muy útiles para
usuarios poco exigentes (e.g., investigadores en Ciencias Sociales para
los que los mapas no son centrales). Existen varios paquetes para esta
tarea, como <code>spmap</code>, <code>geo2xy</code> o
<code>geoplot</code>. En este curso, emplearemos el más moderno de
ellos: <code>geoplot</code>. La principal ventaja de
<code>geoplot</code> sobre otras soluciones previas es que permite
trabajar con más de una capa sin dificultad.</p>
<p>Podemos encontrar una buena introducción al uso de este paquete en
esta <a
href="https://www.stata.com/meeting/italy24/slides/Italy24_Jann.pdf">presentación</a>
del autor, Ben Jann. Además, en su web, este autor nos ofrece algunos <a
href="https://doi.org/10.48350/188248">ejemplos</a> de cursos que
imparte. Una gran referencia, de carácter general, sobre elaboración de
mapas en Stata es posiblemente la colección de guías y tutoriales de <a
href="https://medium.com/the-stata-guide/tagged/maps">Asjad Naqvi</a>.
En particular, este académico ofrece un tutorial para <a
href="https://medium.com/the-stata-guide/maps-in-stata-iii-geoplot-a764cf42688a">`geoplot’</a>.</p>
<p>Un rasgo distintivo de <code>geoplot</code> es su funcionamiento con
los llamados <code>frames</code> de <code>Stata</code>. Básicamente, se
trata de una capacidad de <code>Stata</code> para tener en la memoria
varias bases de datos al mismo tiempo (como, por ejemplo,
<code>R</code>), Asjad Naqvi ofrece en Medium una excelente <a
href="https://medium.com/the-stata-guide/the-stata-frames-guide-1149b50864e3">introducción</a>
a su uso.</p>
<p><code>geoplot</code> requiere la instalación adicional de algunos
paquetes: de <code>shp2dta</code> y <code>mif2dta</code>. Así, podemos
instalar todos los parquetes necesarios de la siguiente forma:</p>
<pre><code>net install geoplot, replace from(https://raw.githubusercontent.com/benjann/geoplot/main/)

ssc install spmap

ssc install shp2dta

ssc install mif2dta

ssc install palettes, replace

ssc install colrspace, replace

ssc install moremata, replace

ssc install geo2xy, replace

ssc install xls2dta, replace</code></pre>
<p>Con <code>geoplot</code>, <code>Stata</code> puede manejar dos tipos
de formatos gráficos: <strong>ESRI shapefiles</strong> (incluye un
archivo <code>.shp</code> de coordenadas, un archivo <code>.shx</code>,
un índice, y un archivo <code>.dbf</code>, con códigos) y el
<strong>MapInfo Interchange Format files</strong> (que comprende un
archivo <code>.mif</code> con las coordenadas y un archivo
<code>.mid</code> con los códigos). El manejo del primer tipo de formato
es, con frecuencia, más sencillo. Para explorar las capacidades de
<code>Stata</code> en esta área, vamos a realizar un mapa de España por
Comunidades Autónomas con su tasa de pobreza.</p>
<p>Procedemos en varios pasos.</p>
<p><strong>Paso 1</strong>. Buscamos los <strong>ESRI
shapefiles</strong> que precisamos. En este caso, podemos encontrarlos
en muchos lugares. El mapa “oficial” se encuentra en el <a
href="http://centrodedescargas.cnig.es/CentroDescargas/documentos/atom/au/lineas_limite_gml.zip">Centro
Nacional de Información Geográfica</a>, los copiamos a la carpeta de
trabajo y descomprimimos la carpeta. Nuestro interés radica en la
carpeta
<code>Recintos autonómicos: poligonos_autonomicas_inspire_peninbal_ etrs89</code>.
Nos vamos a limitar a la península, por simplicidad. Extraemos sus
archivos y los situamos en la carpeta de trabajo.</p>
<p><strong>Paso 2</strong>. Creamos los archivos de atributos y
coordenadas con la siguiente instrucción de <code>geoplot</code>:</p>
<pre class='stata'>. geoframe translate ccaa using "recintos_autonomicas_inspire_peninbal_etrs89", replace // Crea los archivos ccaa.dta (atributos) y ccaa_shp.dta (coordenadas)
(importing shp file) (5 vars, 728,101 obs)
(importing dbf file) (9 vars, 19 obs)
(files ccaa.dta and ccaa_shp.dta saved)
(type geoframe create ccaa to load the data)
</pre>
<p>El archivo de atributos <code>ccaa.dta</code> contiene las líneas que
definen las Comunidades Autónomas y se convertirá en nuestra primera
capa.</p>
<p><strong>Paso 3</strong>. Creamos dos archivos destinados a crear dos
capas adicionales: un cifras de pobreza para elaborar un mapa
coroplético y un archivo con las mismas cifras que serán etiquetas</p>
<pre class='stata'>. //  Abrimos el archivo
. 
. use "ecv18.dta", clear
(ECV 2018)

. 
. //  Calculamos los estadísticos de interés
. 
. collapse (mean) hpobreza [pweight = peso], by(region)

. 
. //  Expresamos la tasa de pobreza en tanto por 100
. 
. replace hpobreza = 100*hpobreza
(19 real changes made)

. 
. //  Eliminamos Canarias, Ceuta y Melilla
. 
. drop if region == 19
(1 observation deleted)

. 
. //  Recodificamos las regiones para enlazar con la variable stid de ccaa_attr.dta
. 
. recode region (1=11) (2=3) (3=5) (4=15) (5=14) (6=16) (7=2) (8=12) (9=6) (10=7) (11=10) (12=8) (13=9) (14=4) (15=1) (16=13) (17=17) (18=18) 
(16 changes made to region)

. 
. //  Eliminamos las etiquetas de los valores para evitar confusiones y le ponemos los valores nuevos
. 
. label drop region_lab

. 
. label define region_lab 1 "Andalucía" 2 "Aragón" 3 "Principado de Asturias" 4 "Illes Balears" 5 "Cantabria" 6 "Castilla y León" 7 "Castilla-La Mancha" 8 "Cataluña" 9 "Comunidad Valenciana" 10 "Extremadura" ///
> 11 "Galicia" 12 "Comunidad de Madrid" 13 "Región de Murcia" 14 "Comunidad Foral de Navarra" 15 "País Vasco" 16 "La Rioja" 17 "Ceuta" 18 "Melilla" 

. label values region region_lab

. 
. //  Cambiamos el nombre de la variable de enlace
. 
. rename region _ID

. 
. //    Guardamos el archivo que servirá para crear la segunda capa (destinada a las áreas del mapa coroplético de niveles de pobreza)
. 
. save "ccaa_pobreza.dta", replace
file ccaa_pobreza.dta saved

. 
. //    Abrimos el archivo de atributos y lo fusionamos con el archivo de datos de pobreza, de forma que tenemos una variable asociada a cada unidad
. 
. use "ccaa.dta", clear

. 
. merge 1:1 _ID using "ccaa_pobreza.dta", keep(match) nogenerate noreport

. 
. save "ccaa_pobreza_datos.dta", replace
file ccaa_pobreza_datos.dta saved

. 
. //  Creamos el archivo destinado a las etiquetas por el mismo procedimiento
. 
. use "ccaa.dta", clear

. 
. merge 1:1 _ID using "ccaa_pobreza.dta", keep(match) nogenerate noreport

. 
. save "ccaa_pobreza_etiquetas.dta", replace
file ccaa_pobreza_etiquetas.dta saved
</pre>
<p><strong>Paso 4</strong>. Creamos los <code>frames</code>
correspondiente</p>
<pre class='stata'>. geoframe create ccaa using "ccaa.dta", shp("ccaa_shp.dta") replace
(creating frame ccaa from ccaa.dta)
(creating frame ccaa_shp from ccaa_shp.dta)

            Frame name: ccaa [make current]
            Frame type: attribute
          Feature type: &lt;none>
         Number of obs: 19
               Unit ID: _ID
           Coordinates: _CX _CY
    Linked shape frame: ccaa_shp

. geoframe create ccaa_pobreza_datos using "ccaa_pobreza_datos.dta", shp("ccaa_shp.dta") replace
(creating frame ccaa_pobreza_datos from ccaa_pobreza_datos.dta)
(creating frame ccaa_pobreza_datos_shp from ccaa_shp.dta)
(dropped 1,962 unmatched observations in frame ccaa_pobreza_datos_shp)

            Frame name: ccaa_pobreza_datos [make current]
            Frame type: attribute
          Feature type: &lt;none>
         Number of obs: 18
               Unit ID: _ID
           Coordinates: _CX _CY
    Linked shape frame: ccaa_pobreza_datos_shp

. geoframe create ccaa_pobreza_etiquetas using "ccaa_pobreza_datos.dta", shp("ccaa_shp.dta") replace
(creating frame ccaa_pobreza_etiquetas from ccaa_pobreza_datos.dta)
(creating frame ccaa_pobreza_etiquetas_shp from ccaa_shp.dta)
(dropped 1,962 unmatched observations in frame ccaa_pobreza_etiquetas_shp)

            Frame name: ccaa_pobreza_etiquetas [make current]
            Frame type: attribute
          Feature type: &lt;none>
         Number of obs: 18
               Unit ID: _ID
           Coordinates: _CX _CY
    Linked shape frame: ccaa_pobreza_etiquetas_shp
</pre>
<p><strong>Paso 5</strong>. Generamos el gráfico</p>
<pre class='stata'>. geoplot ///
>     (area ccaa_pobreza_etiquetas hpobreza, color(Reds) cuts(0 10 20 30 40) label("@lb - @ub",  format(%09.0fc))) ///
>     (label ccaa_pobreza_datos hpobreza, size(small) format(%09.1fc) color(black) ) ///        
>     (line ccaa, lcolor(black) lwidth(0.1))    ///
>     , tight xsize(7) project legend(position(5) layout(- "Tasa de pobreza" 1) size(vsmall) col(1) reverse)
(applying webmercator projection)

. 
</pre>

<figure>
<img src="map.png" style="width:70.0%"
alt="Mapa con el paquete geoplot" />
<figcaption aria-hidden="true">Mapa con el paquete
<code>geoplot</code></figcaption>
</figure>
<p>Obviamente, es posible realizar mapas mucho más elaborados y
complicados.</p>
<figure>
<img src="map_europe.png" style="width:70.0%"
alt="Ejemplo de mapa elaborado por Asjad Naqvi" />
<figcaption aria-hidden="true">Ejemplo de mapa elaborado por Asjad
Naqvi</figcaption>
</figure>
<h1 id="references">References</h1>

<div id="refs" class="references csl-bib-body hanging-indent"
data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-Cox2014" class="csl-entry" role="listitem">
Cox, N. J. (2014). <em>Speaking <span>S</span>tata graphics</em>. Stata
Press.
</div>
<div id="ref-Escobar2012" class="csl-entry" role="listitem">
Escobar, M., Fernández-Macías, E., &amp; Bernardi, F. (2012).
<em>An<span>á</span>lisis de datos con <span>S</span>tata</em> (2nd
ed.). Centro de Investigaciones Soci<span>ó</span>logicas.
</div>
<div id="ref-Jann2018a" class="csl-entry" role="listitem">
Jann, B. (2018a). Customizing <span>S</span>tata graphs made easy (part
1). <em>Stata Journal</em>, <em>3</em>(18), 491–502.
</div>
<div id="ref-Jann2018b" class="csl-entry" role="listitem">
Jann, B. (2018b). Customizing <span>S</span>tata graphs made easy (part
2). <em>Stata Journal</em>, <em>4</em>(19), 786–802.
</div>
<div id="ref-Mitchell2012" class="csl-entry" role="listitem">
Mitchell, M. N. (2012). <em>A visual guide to <span>S</span>tata
graphics</em> (3rd ed.). Stata Press.
</div>
<div id="ref-Schwabish2014" class="csl-entry" role="listitem">
Schwabish, J. A. (2014). An economist<span></span>s guide to visualizing
data. <em>Journal of Economic Perspectives</em>, <em>28</em>(1),
209–234.
</div>
</div>
</body>
</html>
